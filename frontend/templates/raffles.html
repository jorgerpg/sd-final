{% extends "base.html" %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h3>Sorteios</h3>

    {% if session.user %}
    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalCreate">
      + Criar sorteio
    </button>
    {% endif %}
</div>

<div class="row">

{% for r in raffles %}
  <div class="col-md-4">
    <div class="card shadow-sm mb-4">
      <div class="card-body">
        <h5>{{ r.title }}</h5>
        <p>Status: <strong>{{ r.status }}</strong></p>
        <a href="/raffles/{{ r.id }}" class="btn btn-outline-primary w-100">Ver detalhes</a>
      </div>
    </div>
  </div>
{% endfor %}

</div>

<!-- MODAL CRIAR SORTEIO -->
<div class="modal fade" id="modalCreate" tabindex="-1">
  <div class="modal-dialog">
    <form class="modal-content" action="/raffles/create" method="POST">

      <div class="modal-header">
        <h5 class="modal-title">Novo sorteio</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <input class="form-control mb-2" name="title" placeholder="Título">
        <textarea class="form-control" name="description" placeholder="Descrição"></textarea>
      </div>

      <div class="modal-footer">
        <button class="btn btn-success">Criar</button>
      </div>
    </form>
  </div>
</div>

{% endblock %}
